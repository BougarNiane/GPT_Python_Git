<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>로또 번호 생성기</title>
  <style>
    :root{--bg:#0f1720;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8}
    body{font-family:Inter,Segoe UI,Roboto,'Noto Sans KR',sans-serif;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#071029 0%, #0b1220 100%);color:#e6eef6}
    .container{width:100%;max-width:820px;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.7)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:18px}
    button,select,input{appearance:none;border:0;background:#071a2b;color:var(--accent);padding:10px 12px;border-radius:8px;cursor:pointer}
    button.primary{background:linear-gradient(90deg,#06b6d4,#3b82f6);color:#04202a;font-weight:600}
    .numbers{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px}
    .ball{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;background:#0b1522;color:#e6eef6;box-shadow:inset 0 -4px 0 rgba(0,0,0,0.2)}
    .ball.yellow{background:#facc15;color:#1b1b1b}
    .ball.blue{background:#60a5fa;color:#041228}
    .ball.green{background:#34d399;color:#043025}
    .ball.orange{background:#fb923c;color:#2a1400}
    .actions{display:flex;gap:8px;margin-top:16px}
    .saved{margin-top:14px;color:var(--muted);font-size:14px}
    .history{margin-top:12px;background:rgba(255,255,255,0.02);padding:12px;border-radius:8px}
    .row{display:flex;gap:8px;align-items:center}
    small.hint{color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <h1>로또 번호 생성기</h1>
    <p class="lead">중복 없이 1~45 사이의 6개 번호를 생성합니다. 자동/수동 혼합 선택 가능.</p>

    <div class="controls">
      <select id="mode" title="생성 모드">
        <option value="auto">자동 생성</option>
        <option value="mix">수동 + 자동</option>
      </select>
      <input id="manualInput" placeholder="수동 번호 (쉼표로 구분, 예: 3,15)" style="min-width:220px" />
      <button id="generate" class="primary">번호 생성</button>
      <button id="copy">복사</button>
      <button id="save">저장</button>
      <button id="clearHistory">기록 삭제</button>
    </div>

    <div class="row">
      <div class="numbers" id="numbers" aria-live="polite" style="flex:1"></div>
    </div>

    <div class="actions">
      <div class="saved" id="savedMsg">저장된 항목: <span id="savedCount">0</span></div>
      <small class="hint">복사 후 다른 문서에 붙여넣을 수 있습니다.</small>
    </div>

    <div class="history" id="history"></div>

  </div>

  <script>
    // 유틸: 랜덤 로또 번호 생성(중복 제거)
    function pickLotto(manual = []){
      const pool = Array.from({length:45},(_,i)=>i+1);
      // Remove manual numbers from pool (if present)
      const manualSet = new Set(manual.map(n=>Number(n)).filter(n=>n>=1 && n<=45));
      const avail = pool.filter(n => !manualSet.has(n));
      const need = 6 - manualSet.size;
      if(need < 0) throw new Error('수동 번호는 최대 6개까지 입력 가능합니다.');
      if(avail.length < need) throw new Error('충분한 번호가 없습니다.');

      // shuffle avail and pick need
      for(let i=avail.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [avail[i],avail[j]]=[avail[j],avail[i]];
      }
      const picked = avail.slice(0,need);
      const result = [...manualSet, ...picked].map(Number).sort((a,b)=>a-b);
      return result;
    }

    function colorClass(num){
      if(num<=10) return 'yellow';
      if(num<=20) return 'blue';
      if(num<=30) return 'green';
      if(num<=40) return 'orange';
      return 'orange';
    }

    const numbersEl = document.getElementById('numbers');
    const generateBtn = document.getElementById('generate');
    const copyBtn = document.getElementById('copy');
    const saveBtn = document.getElementById('save');
    const modeSel = document.getElementById('mode');
    const manualInput = document.getElementById('manualInput');
    const historyEl = document.getElementById('history');
    const savedCount = document.getElementById('savedCount');

    function renderNumbers(arr){
      numbersEl.innerHTML='';
      arr.forEach(n=>{
        const d = document.createElement('div');
        d.className = 'ball ' + colorClass(n);
        d.textContent = n;
        numbersEl.appendChild(d);
      });
    }

    function showHistory(){
      const saved = JSON.parse(localStorage.getItem('lotto_history') || '[]');
      savedCount.textContent = saved.length;
      if(saved.length===0){ historyEl.textContent='저장된 기록이 없습니다.'; return }
      historyEl.innerHTML='';
      saved.slice().reverse().forEach(entry=>{
        const p = document.createElement('div');
        p.style.display='flex'; p.style.gap='8px'; p.style.alignItems='center'; p.style.marginBottom='8px';
        const s = document.createElement('div'); s.style.minWidth='220px'; s.style.color='#cfeff6'; s.textContent = new Date(entry.t).toLocaleString();
        const nums = document.createElement('div'); entry.n.forEach(n=>{ const b=document.createElement('span'); b.textContent=n + ' '; nums.appendChild(b) });
        const btn = document.createElement('button'); btn.textContent='불러오기'; btn.onclick=()=>{ renderNumbers(entry.n); };
        p.appendChild(s); p.appendChild(nums); p.appendChild(btn);
        historyEl.appendChild(p);
      });
    }

    function genAndRender(){
      try{
        const mode = modeSel.value;
        let manual = [];
        if(mode === 'mix'){
          manual = manualInput.value.split(',').map(s=>s.trim()).filter(Boolean).map(Number);
        }
        const nums = pickLotto(manual);
        renderNumbers(nums);
        return nums;
      }catch(e){
        alert(e.message);
        return null;
      }
    }

    generateBtn.addEventListener('click', ()=>{ genAndRender(); });

    copyBtn.addEventListener('click', ()=>{
      const text = Array.from(numbersEl.children).map(el=>el.textContent).join(', ');
      if(!text) { alert('먼저 번호를 생성하세요.'); return }
      navigator.clipboard.writeText(text).then(()=>{
        alert('번호가 클립보드에 복사되었습니다: ' + text);
      }).catch(()=>{ alert('복사에 실패했습니다.') });
    });

    saveBtn.addEventListener('click', ()=>{
      const nums = Array.from(numbersEl.children).map(el=>Number(el.textContent));
      if(nums.length!==6){ alert('저장하려면 6개의 번호가 필요합니다.'); return }
      const saved = JSON.parse(localStorage.getItem('lotto_history') || '[]');
      saved.push({t:Date.now(), n:nums});
      localStorage.setItem('lotto_history', JSON.stringify(saved));
      showHistory();
      alert('저장되었습니다.');
    });

    document.getElementById('clearHistory').addEventListener('click', ()=>{
      if(confirm('저장된 기록을 모두 삭제하시겠습니까?')){
        localStorage.removeItem('lotto_history'); showHistory();
      }
    })

    // 초기 로드
    showHistory();

  </script>
</body>
</html>